\doxysection{liborcos/\+Src/sharp.c File Reference}
\hypertarget{sharp_8c}{}\label{sharp_8c}\index{liborcos/Src/sharp.c@{liborcos/Src/sharp.c}}
{\ttfamily \#include "{}stm32u3xx\+\_\+hal.\+h"{}}\newline
{\ttfamily \#include "{}fonts.\+h"{}}\newline
{\ttfamily \#include "{}sharp.\+h"{}}\newline
{\ttfamily \#include "{}sharp\+\_\+graphics.\+h"{}}\newline
{\ttfamily \#include "{}sharp\+\_\+lowlevel.\+h"{}}\newline
{\ttfamily \#include "{}stm32u3xx\+\_\+hal\+\_\+rtc\+\_\+ex.\+h"{}}\newline
{\ttfamily \#include "{}openrpncalc.\+h"{}}\newline
{\ttfamily \#include "{}orcos.\+h"{}}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sharp_8c_a40874bcf0f1d6848a86f969302906486}{OFF\+\_\+\+TIMEOUT}}~(5 \texorpdfstring{$\ast$}{*} 60)
\item 
\#define \mbox{\hyperlink{sharp_8c_a2b4226dc659b0a4f6a01e142026179a8}{NUM\+\_\+\+OF\+\_\+\+TEST\+\_\+\+SCREENS}}~9
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sharp_8c_af2b24d03f6b39ea3bc80a826e1274d22}{Wake\+Up\+Timer\+Event\+Callback}} (RTC\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{orcos_8c_aa0c7fca836406ade332e1e3f1039d8ab}{hrtc}})
\begin{DoxyCompactList}\small\item\em Draws a string directly to the LCD framebuffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharp_8c_afdd52acf2e2f027169b012f29f1bcdfe}{lcd\+\_\+keep\+\_\+alive}} ()
\item 
void \mbox{\hyperlink{sharp_8c_a974793f3b67a06e42f2d2220085d6450}{LCD\+\_\+power\+\_\+on}} ()
\begin{DoxyCompactList}\small\item\em Power on the LCD display Enables power supply and initializes display controller. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharp_8c_a62f147db55f878fadcba3ffdb7acf29b}{LCD\+\_\+power\+\_\+off}} (int clear)
\begin{DoxyCompactList}\small\item\em Power off the LCD display. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{sharp_8c_a7db02e55c427894ec13cbd0de3cccaee}{LCD\+\_\+is\+\_\+on}} ()
\begin{DoxyCompactList}\small\item\em Check if LCD is powered on. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sharp_8c_aaaa4d5adc8a09003ea4fb05ec55a1e9c}{lcd\+\_\+for\+\_\+calc}} (int what\+\_\+screen)
\begin{DoxyCompactList}\small\item\em Draw calculator screen based on mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sharp_8c_ae05f0ca3bff52d8189c94274e2488cba}{LCD\+\_\+test\+\_\+screen}} (uint16\+\_\+t count)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
RTC\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{sharp_8c_aa0c7fca836406ade332e1e3f1039d8ab}{hrtc}}
\item 
TIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{sharp_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}
\item 
SPI\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{sharp_8c_ab9da65f935e805137e2eb4e18c5ab224}{hspi2}}
\item 
LPTIM\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{sharp_8c_a5b23b3a6e34345b4b70d2dd25a0e77e8}{hlptim1}}
\item 
uint8\+\_\+t \mbox{\hyperlink{sharp_8c_a6c38a8f9c4da96e34ea417aa6a1976d5}{g\+\_\+framebuffer}} \mbox{[}\mbox{\hyperlink{orcos_8h_a53a8b2a971de4b88047192655a48b651}{LCD\+\_\+\+HEIGHT}}\mbox{]}\mbox{[}\mbox{\hyperlink{orcos_8h_a19693eac3018d3e7800fde141921b812}{LCD\+\_\+\+WIDTH}}/8\mbox{]}
\end{DoxyCompactItemize}


\label{doc-define-members}
\Hypertarget{sharp_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{sharp_8c_a2b4226dc659b0a4f6a01e142026179a8}\index{sharp.c@{sharp.c}!NUM\_OF\_TEST\_SCREENS@{NUM\_OF\_TEST\_SCREENS}}
\index{NUM\_OF\_TEST\_SCREENS@{NUM\_OF\_TEST\_SCREENS}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{NUM\_OF\_TEST\_SCREENS}{NUM\_OF\_TEST\_SCREENS}}
{\footnotesize\ttfamily \label{sharp_8c_a2b4226dc659b0a4f6a01e142026179a8} 
\#define NUM\+\_\+\+OF\+\_\+\+TEST\+\_\+\+SCREENS~9}

\Hypertarget{sharp_8c_a40874bcf0f1d6848a86f969302906486}\index{sharp.c@{sharp.c}!OFF\_TIMEOUT@{OFF\_TIMEOUT}}
\index{OFF\_TIMEOUT@{OFF\_TIMEOUT}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{OFF\_TIMEOUT}{OFF\_TIMEOUT}}
{\footnotesize\ttfamily \label{sharp_8c_a40874bcf0f1d6848a86f969302906486} 
\#define OFF\+\_\+\+TIMEOUT~(5 \texorpdfstring{$\ast$}{*} 60)}



\label{doc-func-members}
\Hypertarget{sharp_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{sharp_8c_aaaa4d5adc8a09003ea4fb05ec55a1e9c}\index{sharp.c@{sharp.c}!lcd\_for\_calc@{lcd\_for\_calc}}
\index{lcd\_for\_calc@{lcd\_for\_calc}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{lcd\_for\_calc()}{lcd\_for\_calc()}}
{\footnotesize\ttfamily \label{sharp_8c_aaaa4d5adc8a09003ea4fb05ec55a1e9c} 
int lcd\+\_\+for\+\_\+calc (\begin{DoxyParamCaption}\item[{int}]{what\+\_\+screen}{}\end{DoxyParamCaption})}



Draw calculator screen based on mode. 

Inverts all pixels in the global framebuffer (black becomes white and vice versa) \Hypertarget{sharp_8c_a7db02e55c427894ec13cbd0de3cccaee}\index{sharp.c@{sharp.c}!LCD\_is\_on@{LCD\_is\_on}}
\index{LCD\_is\_on@{LCD\_is\_on}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{LCD\_is\_on()}{LCD\_is\_on()}}
{\footnotesize\ttfamily \label{sharp_8c_a7db02e55c427894ec13cbd0de3cccaee} 
bool LCD\+\_\+is\+\_\+on (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Check if LCD is powered on. 

\begin{DoxyReturn}{Returns}
true if LCD is powered on, false otherwise 
\end{DoxyReturn}
\Hypertarget{sharp_8c_afdd52acf2e2f027169b012f29f1bcdfe}\index{sharp.c@{sharp.c}!lcd\_keep\_alive@{lcd\_keep\_alive}}
\index{lcd\_keep\_alive@{lcd\_keep\_alive}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{lcd\_keep\_alive()}{lcd\_keep\_alive()}}
{\footnotesize\ttfamily \label{sharp_8c_afdd52acf2e2f027169b012f29f1bcdfe} 
void lcd\+\_\+keep\+\_\+alive (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\Hypertarget{sharp_8c_a62f147db55f878fadcba3ffdb7acf29b}\index{sharp.c@{sharp.c}!LCD\_power\_off@{LCD\_power\_off}}
\index{LCD\_power\_off@{LCD\_power\_off}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{LCD\_power\_off()}{LCD\_power\_off()}}
{\footnotesize\ttfamily \label{sharp_8c_a62f147db55f878fadcba3ffdb7acf29b} 
void LCD\+\_\+power\+\_\+off (\begin{DoxyParamCaption}\item[{int}]{clear}{}\end{DoxyParamCaption})}



Power off the LCD display. 


\begin{DoxyParams}{Parameters}
{\em clear} & If non-\/zero, clears display before power off \\
\hline
\end{DoxyParams}
\Hypertarget{sharp_8c_a974793f3b67a06e42f2d2220085d6450}\index{sharp.c@{sharp.c}!LCD\_power\_on@{LCD\_power\_on}}
\index{LCD\_power\_on@{LCD\_power\_on}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{LCD\_power\_on()}{LCD\_power\_on()}}
{\footnotesize\ttfamily \label{sharp_8c_a974793f3b67a06e42f2d2220085d6450} 
void LCD\+\_\+power\+\_\+on (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Power on the LCD display Enables power supply and initializes display controller. 

\Hypertarget{sharp_8c_ae05f0ca3bff52d8189c94274e2488cba}\index{sharp.c@{sharp.c}!LCD\_test\_screen@{LCD\_test\_screen}}
\index{LCD\_test\_screen@{LCD\_test\_screen}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{LCD\_test\_screen()}{LCD\_test\_screen()}}
{\footnotesize\ttfamily \label{sharp_8c_ae05f0ca3bff52d8189c94274e2488cba} 
void LCD\+\_\+test\+\_\+screen (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{count}{}\end{DoxyParamCaption})}

\Hypertarget{sharp_8c_af2b24d03f6b39ea3bc80a826e1274d22}\index{sharp.c@{sharp.c}!WakeUpTimerEventCallback@{WakeUpTimerEventCallback}}
\index{WakeUpTimerEventCallback@{WakeUpTimerEventCallback}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{WakeUpTimerEventCallback()}{WakeUpTimerEventCallback()}}
{\footnotesize\ttfamily \label{sharp_8c_af2b24d03f6b39ea3bc80a826e1274d22} 
void Wake\+Up\+Timer\+Event\+Callback (\begin{DoxyParamCaption}\item[{RTC\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}}]{hrtc}{}\end{DoxyParamCaption})}



Draws a string directly to the LCD framebuffer. 


\begin{DoxyParams}{Parameters}
{\em str} & String to draw \\
\hline
{\em font} & Pointer to font definition \\
\hline
{\em dx} & X position (0-\/399) \\
\hline
{\em dy} & Y position (0-\/239) \\
\hline
{\em color} & LCD\+\_\+\+SET\+\_\+\+VALUE (1=set) or LCD\+\_\+\+EMPTY\+\_\+\+VALUE (1=clear)\\
\hline
\end{DoxyParams}
Note\+: dx will be rounded to the closest byte-\/aligned address 

\label{doc-var-members}
\Hypertarget{sharp_8c_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{sharp_8c_a6c38a8f9c4da96e34ea417aa6a1976d5}\index{sharp.c@{sharp.c}!g\_framebuffer@{g\_framebuffer}}
\index{g\_framebuffer@{g\_framebuffer}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{g\_framebuffer}{g\_framebuffer}}
{\footnotesize\ttfamily \label{sharp_8c_a6c38a8f9c4da96e34ea417aa6a1976d5} 
uint8\+\_\+t g\+\_\+framebuffer\mbox{[}\mbox{\hyperlink{orcos_8h_a53a8b2a971de4b88047192655a48b651}{LCD\+\_\+\+HEIGHT}}\mbox{]}\mbox{[}\mbox{\hyperlink{orcos_8h_a19693eac3018d3e7800fde141921b812}{LCD\+\_\+\+WIDTH}}/8\mbox{]}}

\Hypertarget{sharp_8c_a5b23b3a6e34345b4b70d2dd25a0e77e8}\index{sharp.c@{sharp.c}!hlptim1@{hlptim1}}
\index{hlptim1@{hlptim1}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{hlptim1}{hlptim1}}
{\footnotesize\ttfamily \label{sharp_8c_a5b23b3a6e34345b4b70d2dd25a0e77e8} 
LPTIM\+\_\+\+Handle\+Type\+Def hlptim1}

\Hypertarget{sharp_8c_aa0c7fca836406ade332e1e3f1039d8ab}\index{sharp.c@{sharp.c}!hrtc@{hrtc}}
\index{hrtc@{hrtc}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{hrtc}{hrtc}}
{\footnotesize\ttfamily \label{sharp_8c_aa0c7fca836406ade332e1e3f1039d8ab} 
RTC\+\_\+\+Handle\+Type\+Def hrtc\hspace{0.3cm}{\ttfamily [extern]}}

\Hypertarget{sharp_8c_ab9da65f935e805137e2eb4e18c5ab224}\index{sharp.c@{sharp.c}!hspi2@{hspi2}}
\index{hspi2@{hspi2}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{hspi2}{hspi2}}
{\footnotesize\ttfamily \label{sharp_8c_ab9da65f935e805137e2eb4e18c5ab224} 
SPI\+\_\+\+Handle\+Type\+Def hspi2}

\Hypertarget{sharp_8c_a25fc663547539bc49fecc0011bd76ab5}\index{sharp.c@{sharp.c}!htim1@{htim1}}
\index{htim1@{htim1}!sharp.c@{sharp.c}}
\doxysubsubsection{\texorpdfstring{htim1}{htim1}}
{\footnotesize\ttfamily \label{sharp_8c_a25fc663547539bc49fecc0011bd76ab5} 
TIM\+\_\+\+Handle\+Type\+Def htim1}

